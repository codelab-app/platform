fragment AppPreview on App {
  id
  name
  slug
  owner {
    id
  }
  pages {
    ...Page
  }
  store {
    id
  }
}

fragment App on App {
  id
  name
  slug
  owner {
    id
  }
  pages {
    ...Page
  }
  store {
    id
  }
}

fragment BuilderPage on Page {
  id
  name
  slug
  getServerSideProps
  rootElement {
    ...Element
    descendantElements {
      ...Element
    }
  }
  app {
    id
  }
  pageContainerElement {
    id
  }
  kind
}

fragment PageBuilderApp on App {
  id
  name
  slug
  owner {
    id
  }
  pages(
    where: { OR: [{ id: $pageId }, { kind: Provider }, { kind: NotFound }] }
  ) {
    ...BuilderPage
  }
  store {
    ...Store
  }
}
